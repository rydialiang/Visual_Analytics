{
  "hash": "43b3713e1d55109ff01c95d36c02f2f5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Take-home Ex 01\"\nauthor: \"Liang Xiuhao Rydia\"\ndate: \"April 15, 2024\"\ndate-modified: \"last-modified\"\nexecute:\n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n---\n\n\n# **Building Elegant and yet Informative Data Visualisation**\n\n## 1.0 Overview\n\n### 1.1 Setting the scene\n\nThere are two major residential property market in Singapore, namely public and private housing. Public housing aims to meet the basic need of the general public with monthly \\$14,000 for families/couples buying a new HDB flat. Singapore is a city-state with limited land resource. Housing, on the other hand, is one of the basic need of people of this city-state. In order to ensure that all citizen in the country can access to affordable housing, the government have initiated massive public housing programme since independent.\n\n### 1.2 The Task\n\nAssuming the role of a graphical editor of a media company, you are requested to prepare minimum two and maximum three data visualisation to reveal the ***private residential market*** and ***sub-markets of Singapore*** for the 1st quarter of 2024.\n\n## 2.0 Set Up\n\n### 2.1 Loading the packages into R\n\nT he `pac::p_load()` function to load the required R packages in the working environment. The following packages are used in this set up:\n\n-   ggthemes: Extra themes, geoms, and scales for ggplot2.\n-   tidyverse: A collection of core packages designed for data science, used extensively for data preparation and wrangling.\n-   ggridges: a ggplot2 extension specially designed for plotting ridgeline plots\n-   colorspace:\n-   ggiraph: for making ‘ggplot’ graphics interactive.\n-   plotly: R library for plotting interactive statistical graphs.\n-   patchwork: specially designed for combining separate ggplot2 graphs into a single figure.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load tidyverse from pacman\npacman::p_load(tidyverse,dplyr,ggridges,ggthemes,colorspace,ggiraph,plotly,patchwork)\n```\n:::\n\n\n### 2.2 Importing the data sets\n\nFive sets of data are provided for this exercise:\n\n1.  2023 Quarter 1 Residential Transaction: ResidentialTransaction20240308160536.csv\n2.  2023 Quarter 2 Residential Transaction: ResidentialTransaction20240308160736.csv\n3.  2023 Quarter 3 Residential Transaction: ResidentialTransaction20240308161009.csv\n4.  2023 Quarter 4 Residential Transaction: ResidentialTransaction20240308161109.csv\n5.  2024 Quarter 1 Residential Transaction: ResidentialTransaction20240414220633.csv\n\nAll five sets of data consists of past transactions between Q1 of 2023 to Q1 of 2024, with 21 variables that will be explored in detail after the data sets are imported.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load transaction data using readr, part of tidyverse package\ndata.23Q1 <- read_csv(\"data/ResidentialTransaction20240308160536.csv\")\ndata.23Q2 <- read_csv(\"data/ResidentialTransaction20240308160736.csv\")\ndata.23Q3 <- read_csv(\"data/ResidentialTransaction20240308161009.csv\")\ndata.23Q4 <- read_csv(\"data/ResidentialTransaction20240308161109.csv\")\ndata.24Q1 <- read_csv(\"data/ResidentialTransaction20240414220633.csv\")\n```\n:::\n\n\nTo add new column `Quarter` into each of the csv file.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata.23Q1$Quarter <- rep('23Q1',nrow(data.23Q1))\ndata.23Q2$Quarter <- rep('23Q2',nrow(data.23Q2))\ndata.23Q3$Quarter <- rep('23Q3',nrow(data.23Q3))\ndata.23Q4$Quarter <-rep('23Q4',nrow(data.23Q4))\ndata.24Q1$Quarter <- rep('24Q1',nrow(data.24Q1))\n```\n:::\n\n\nCombining all the data set into one\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- rbind(data.23Q1,data.23Q2,data.23Q3,data.23Q4,data.24Q1)\n```\n:::\n\n\nTo have a basic understanding of all 21 variables, `glimpse()` is used with 2024 Q1 data. We can see that there are 21 columns, with the following data types:\n\n-   doubles:\n\n    1.  `Transacted Price ($)`\n    2.  `Area (SQFT)`\n    3.  `Unit Price ($ PSF)`\n    4.  `Area (SQM)`\n    5.  `Unit Price ($ PSM)`\n    6.  `Number of Units`\n\n-   characters: the rest of the 16 variables, including `Quarter`\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# have a basic understanding for all 22 variables\nglimpse(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 26,806\nColumns: 22\n$ `Project Name`                <chr> \"THE REEF AT KING'S DOCK\", \"URBAN TREASU…\n$ `Transacted Price ($)`        <dbl> 2317000, 1823500, 1421112, 1258112, 1280…\n$ `Area (SQFT)`                 <dbl> 882.65, 882.65, 1076.40, 1033.34, 871.88…\n$ `Unit Price ($ PSF)`          <dbl> 2625, 2066, 1320, 1218, 1468, 1767, 1095…\n$ `Sale Date`                   <chr> \"01 Jan 2023\", \"02 Jan 2023\", \"02 Jan 20…\n$ Address                       <chr> \"12 HARBOURFRONT AVENUE #05-32\", \"205 JA…\n$ `Type of Sale`                <chr> \"New Sale\", \"New Sale\", \"New Sale\", \"New…\n$ `Type of Area`                <chr> \"Strata\", \"Strata\", \"Strata\", \"Strata\", …\n$ `Area (SQM)`                  <dbl> 82.0, 82.0, 100.0, 96.0, 81.0, 308.7, 42…\n$ `Unit Price ($ PSM)`          <dbl> 28256, 22238, 14211, 13105, 15802, 19015…\n$ `Nett Price($)`               <chr> \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", …\n$ `Property Type`               <chr> \"Condominium\", \"Condominium\", \"Executive…\n$ `Number of Units`             <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n$ Tenure                        <chr> \"99 yrs from 12/01/2021\", \"Freehold\", \"9…\n$ `Completion Date`             <chr> \"Uncompleted\", \"Uncompleted\", \"Uncomplet…\n$ `Purchaser Address Indicator` <chr> \"HDB\", \"Private\", \"HDB\", \"HDB\", \"HDB\", \"…\n$ `Postal Code`                 <chr> \"097996\", \"419535\", \"269343\", \"269294\", …\n$ `Postal District`             <chr> \"04\", \"14\", \"27\", \"27\", \"28\", \"19\", \"10\"…\n$ `Postal Sector`               <chr> \"09\", \"41\", \"26\", \"26\", \"79\", \"54\", \"27\"…\n$ `Planning Region`             <chr> \"Central Region\", \"East Region\", \"North …\n$ `Planning Area`               <chr> \"Bukit Merah\", \"Bedok\", \"Yishun\", \"Yishu…\n$ Quarter                       <chr> \"23Q1\", \"23Q1\", \"23Q1\", \"23Q1\", \"23Q1\", …\n```\n\n\n:::\n:::\n\n\n### 2.3 Understanding the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = df, \n       aes(x=Quarter, fill = `Type of Sale`)) +\n  geom_bar() \n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = df ,\n       aes(x = `Transacted Price ($)`,\n           y = Quarter,\n           fill = factor(stat(quantile))\n           )) +\n  stat_density_ridges(\n    geom = \"density_ridges_gradient\",\n    calc_ecdf = TRUE,\n    quantiles = 4,\n    quantile_lines = TRUE) +\n  scale_fill_viridis_d(name = \"Quartiles\") +\n  theme_ridges()+\n  facet_wrap(~`Property Type`,scales = \"free\")\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = df, \n       aes(x=`Type of Area`,\n           fill = `Type of Sale`)) +\n  geom_bar() +\n  facet_grid(~Quarter, scales = \"free\")\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nLooking at the bar chart above, it might be a good way to filter the data based on Type of Area to do further analysis. To lend some background context to this segregation, you can refer to this link: [Landed vs. Strata Landed](https://plbinsights.com/landed-vs-strata-landed-whats-the-difference-how-have-they-performed-in-recent-years/#:~:text=According%20to%20the%20URA%20website,as%20a%20pure%20landed%20property.) From this link, we can also derive further segregation by Property Type.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nland_df <- filter(df, `Type of Area` == 'Land')\nstrata_df<- filter(df, `Type of Area` == 'Strata')\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = land_df, \n       aes(x= `Property Type`,\n           fill = `Purchaser Address Indicator`)) +\n  geom_bar() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +\n  facet_grid(~Quarter)\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = land_df ,\n       aes(x = `Transacted Price ($)`,\n           y = Quarter,\n           fill = factor(stat(quantile))\n           )) +\n  stat_density_ridges(\n    geom = \"density_ridges_gradient\",\n    calc_ecdf = TRUE,\n    quantiles = 4,\n    quantile_lines = TRUE) +\n  scale_fill_viridis_d(name = \"Quartiles\") +\n  theme_ridges()+\n  facet_grid(~`Property Type`,scales = \"free\") +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+\n  scale_x_continuous(labels = scales::comma)\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = land_df, \n       aes(y = `Transacted Price ($)`, x = `Property Type`)) +\n  geom_boxplot()+\n  facet_grid(~Quarter) +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +\n  coord_cartesian(xlim=c(1,4),\n                  ylim=c(0,30000000))\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = strata_df, \n       aes(y = `Transacted Price ($)`, \n           x = `Property Type`)) +\n  geom_boxplot()+\n  facet_grid(~Quarter) +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +\n  coord_cartesian(xlim=c(1,6),\n                  ylim=c(0,10000000))\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmean_strata_by_property_type <- strata_df %>%\n  group_by(`Property Type`) %>%\n  summarise(mean_price = mean(`Transacted Price ($)`))\n\nggplot(strata_df,\n       aes(x=`Area (SQM)`, \n           y = `Transacted Price ($)`,\n           color = `Property Type`)) +\n  geom_point_interactive() +\n  coord_cartesian(xlim=c(0,1000),\n                  ylim=c(0,50000000)) +\n  geom_smooth(method = lm, se = FALSE) +\n  facet_wrap(~`Property Type`, scales = \"free\")\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmean_land_by_property_type <- land_df %>%\n  group_by(`Property Type`) %>%\n  summarise(mean_price = mean(`Transacted Price ($)`))\n\nggplot(land_df,\n       aes(x=`Area (SQM)`, \n           y = `Transacted Price ($)`,\n           color = `Property Type`)) +\n  geom_point_interactive() +\n  coord_cartesian(xlim=c(0,1000),\n                  ylim=c(0,50000000)) +\n  geom_smooth(method = lm, se = FALSE) +\n  facet_wrap(~`Property Type`, scales = \"free\")\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = strata_df ,\n       aes(x = `Transacted Price ($)`,\n           y = Quarter,\n           fill = factor(stat(quantile))\n           )) +\n  stat_density_ridges(\n    geom = \"density_ridges_gradient\",\n    calc_ecdf = TRUE,\n    quantiles = 4,\n    quantile_lines = TRUE) +\n  scale_fill_viridis_d(name = \"Quartiles\") +\n  theme_ridges()+\n  facet_grid(~`Planning Region`, scales = \"free\")+\n  scale_x_continuous(labels = scales::comma)+\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) \n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = df,\n       aes(x =`Purchaser Address Indicator`,\n           fill = `Type of Sale`)) +\n  geom_bar() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +\n  facet_grid(~`Planning Region`)+\n  ggtitle(\"Purchaser Address Indicator by Planning Region\")\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nB <- ggplot(data = land_df,\n       aes(x =`Purchaser Address Indicator`,\n           fill = `Type of Sale`)) +\n  geom_bar() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +\n  facet_grid(~`Planning Region`) +\n  ggtitle(\"Land:Purchaser Address Indicator by Planning Region\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nC <- ggplot(data = strata_df,\n       aes(x =`Purchaser Address Indicator`,\n           fill = `Type of Sale`)) +\n  geom_bar() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +\n  facet_grid(~`Planning Region`) +\n  ggtitle(\"Strata:Purchaser Address Indicator by Planning Region\")\n```\n:::\n\n\n## 3.0 Data Visualisation\n\n\n::: {.cell}\n\n```{.r .cell-code}\n(B/C)+\n  plot_annotation(tag_levels = 'I')\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "Take-home_Ex01_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}